<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Agentopia</title>
    <meta
      name="description"
      content="Discover and explore AI agents in the Agentopia ecosystem. Find the perfect AI agent for your needs."
    />

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="images/logo.svg" />
    <link rel="manifest" href="site.webmanifest" />

    <link rel="stylesheet" href="css/styles.css" />
    <!-- Add Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add Animation Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            animation: {
              gradient: "gradient 8s linear infinite",
            },
            keyframes: {
              gradient: {
                "0%, 100%": {
                  "background-size": "200% 200%",
                  "background-position": "left center",
                },
                "50%": {
                  "background-size": "200% 200%",
                  "background-position": "right center",
                },
              },
            },
          },
        },
      };
    </script>
    <style>
      .tooltip {
        visibility: hidden;
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%);
        padding: 6px 12px;
        background: rgba(31, 41, 55, 0.95);
        color: #d1d5db;
        font-size: 0.875rem;
        white-space: nowrap;
        border-radius: 8px;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 10;
        margin-bottom: 8px;
        pointer-events: none;
      }

      .tooltip-container:hover .tooltip {
        visibility: visible;
        opacity: 1;
      }
    </style>
  </head>
  <body class="bg-gray-900 text-gray-100 min-h-screen flex flex-col">
    <!-- Navigation will be included via JavaScript -->
    <div id="nav-placeholder"></div>

    <!-- Hero Section with Animated Background -->
    <section
      class="relative pt-16 md:pt-32 pb-12 md:pb-24 overflow-hidden bg-gradient-to-br from-gray-900 via-sky-900 to-gray-900 animate-gradient"
    >
      <div class="absolute inset-0 bg-[url('images/hero-pattern.svg')] opacity-10"></div>
      <div class="container mx-auto px-4 relative">
        <div class="max-w-3xl mx-auto text-center">
          <h1
            class="text-3xl sm:text-4xl md:text-5xl font-bold py-4 mb-8 bg-gradient-to-r from-amber-400 to-amber-200 bg-clip-text text-transparent animate__animated animate__fadeIn"
          >
            AI Agents Gallery
          </h1>
          <p
            class="text-base sm:text-lg md:text-xl text-gray-300 leading-relaxed mb-8 md:mb-12 px-2 sm:px-4 animate__animated animate__fadeIn animate__delay-1s"
          >
            Discover and explore our curated collection of AI agents. Find the perfect agent to enhance your workflow
            and boost productivity.
          </p>
          <div
            class="flex flex-col sm:flex-row justify-center gap-4 px-4 sm:px-8 animate__animated animate__fadeIn animate__delay-2s"
          >
            <a
              href="#featured-agents"
              class="w-full sm:w-auto px-8 py-4 bg-amber-500 hover:bg-amber-600 text-gray-900 font-semibold rounded-lg transition-all duration-300 text-center shadow-lg hover:shadow-xl"
            >
              Browse Agents
            </a>
            <a
              href="#categories"
              class="w-full sm:w-auto px-8 py-4 border-2 border-amber-500 text-amber-500 hover:bg-amber-500/10 font-semibold rounded-lg transition-all duration-300 text-center"
            >
              View Categories
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Search and Filter Section -->
    <section class="py-6 md:py-8 bg-gray-800/80 backdrop-blur-sm">
      <div class="container mx-auto px-4">
        <div class="flex flex-col items-center max-w-4xl mx-auto gap-8">
          <!-- Search Bar -->
          <div class="relative w-full">
            <input
              type="text"
              id="searchInput"
              placeholder="Search agents..."
              class="w-full px-12 py-3 bg-gray-700/80 border border-gray-600 rounded-lg focus:outline-none focus:border-amber-500 transition-colors duration-300"
            />
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
              <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                ></path>
              </svg>
            </div>
          </div>

          <!-- Dropdown Row -->
          <div class="flex flex-wrap gap-4 justify-center w-full">
            <div class="relative">
              <select
                id="typeFilter"
                class="pl-6 pr-10 py-2 bg-gray-700/80 border border-gray-600 rounded-lg focus:outline-none focus:border-amber-500 transition-colors duration-300 appearance-none cursor-pointer min-w-[160px]"
              >
                <option value="">All Types</option>
                <option value="regular">Regular</option>
                <option value="autonomous">Autonomous</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>

            <div class="relative">
              <select
                id="scaleFilter"
                class="pl-6 pr-10 py-2 bg-gray-700/80 border border-gray-600 rounded-lg focus:outline-none focus:border-amber-500 transition-colors duration-300 appearance-none cursor-pointer min-w-[160px]"
              >
                <option value="">All Scales</option>
                <option value="single">Single</option>
                <option value="multiple">Multiple</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>

            <div class="relative">
              <select
                id="categoryFilter"
                class="pl-6 pr-10 py-2 bg-gray-700/80 border border-gray-600 rounded-lg focus:outline-none focus:border-amber-500 transition-colors duration-300 appearance-none cursor-pointer min-w-[160px]"
              >
                <option value="">All Categories</option>
                <option value="data-analysis-research">Data Analysis & Research</option>
                <option value="productivity-organization">Productivity & Organization</option>
                <option value="automation-utilities">Automation & Utilities</option>
                <option value="creative-content-design">Creative Content & Design</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>

            <div class="relative">
              <select
                id="sortFilter"
                class="pl-6 pr-10 py-2 bg-gray-700/80 border border-gray-600 rounded-lg focus:outline-none focus:border-amber-500 transition-colors duration-300 appearance-none cursor-pointer min-w-[160px]"
              >
                <option value="">Sort By</option>
                <option value="popular">Most Popular</option>
                <option value="recent">Recently Added</option>
                <option value="rating">Highest Rated</option>
                <option value="visits">Most Visited</option>
                <option value="name">Alphabetical</option>
              </select>
              <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-400">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
              </div>
            </div>
          </div>

          <!-- Search Button -->
          <div class="flex items-center gap-4 justify-center">
            <button
              type="button"
              id="searchButton"
              class="px-8 py-2.5 bg-amber-500 hover:bg-amber-600 text-gray-900 font-semibold rounded-lg transition-all duration-300 text-center text-base shadow-md hover:shadow-lg hover:-translate-y-0.5"
            >
              Search Agents
            </button>
            <button
              type="button"
              id="clearFiltersButton"
              class="hidden px-8 py-2.5 bg-gray-700 hover:bg-gray-600 text-gray-300 font-medium rounded-lg transition-all duration-300 text-center text-base border border-gray-600"
            >
              Clear Filters
            </button>
          </div>
        </div>
      </div>
    </section>

    <!-- Featured Agents Section -->
    <section id="featured-agents" class="py-16 md:py-24">
      <div class="container mx-auto px-4">
        <div class="text-center max-w-3xl mx-auto mb-12 md:mb-16">
          <h2
            class="text-2xl md:text-3xl font-bold mb-4 bg-gradient-to-r from-amber-400 to-amber-200 bg-clip-text text-transparent"
          >
            Featured Agents
          </h2>
          <p class="text-gray-400">
            Discover our most popular and powerful AI agents, carefully curated to help you achieve more.
          </p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8" id="agentsGrid">
          <!-- Agent cards will be dynamically populated -->
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section id="categories" class="py-12 md:py-16 bg-gray-800">
      <div class="container mx-auto px-4">
        <h2 class="text-2xl md:text-3xl font-bold text-center mb-8 text-gray-100">Browse by Category</h2>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-6xl mx-auto">
          <!-- Productivity & Organization Card -->
          <a
            href="agents.html?category=productivity-organization"
            class="group relative bg-gray-800/50 rounded-xl overflow-hidden border border-gray-700/50 backdrop-blur-sm transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl"
          >
            <div
              class="h-48 bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center transition-all duration-300 group-hover:from-gray-700 group-hover:to-gray-600"
            >
              <span class="text-6xl transform transition-transform duration-300 group-hover:scale-110">ðŸš€</span>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-semibold mb-2 text-gray-100">Productivity & Organization</h3>
              <p class="text-gray-400">Organize your work and boost efficiency with AI-powered tools.</p>
            </div>
          </a>

          <!-- Automation & Utilities Card -->
          <a
            href="agents.html?category=automation-utilities"
            class="group relative bg-gray-800/50 rounded-xl overflow-hidden border border-gray-700/50 backdrop-blur-sm transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl"
          >
            <div
              class="h-48 bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center transition-all duration-300 group-hover:from-gray-700 group-hover:to-gray-600"
            >
              <span class="text-6xl transform transition-transform duration-300 group-hover:scale-110">âš¡</span>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-semibold mb-2 text-gray-100">Automation & Utilities</h3>
              <p class="text-gray-400">Automate tasks, access helpful utilities, and streamline workflows.</p>
            </div>
          </a>

          <!-- Data Analysis & Research Card -->
          <a
            href="agents.html?category=data-analysis-research"
            class="group relative bg-gray-800/50 rounded-xl overflow-hidden border border-gray-700/50 backdrop-blur-sm transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl"
          >
            <div
              class="h-48 bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center transition-all duration-300 group-hover:from-gray-700 group-hover:to-gray-600"
            >
              <span class="text-6xl transform transition-transform duration-300 group-hover:scale-110">ðŸ“Š</span>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-semibold mb-2 text-gray-100">Data Analysis & Research</h3>
              <p class="text-gray-400">Analyze data, conduct research, and gain valuable insights.</p>
            </div>
          </a>

          <!-- Creative Content & Design Card -->
          <a
            href="agents.html?category=creative-content-design"
            class="group relative bg-gray-800/50 rounded-xl overflow-hidden border border-gray-700/50 backdrop-blur-sm transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl"
          >
            <div
              class="h-48 bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center transition-all duration-300 group-hover:from-gray-700 group-hover:to-gray-600"
            >
              <span class="text-6xl transform transition-transform duration-300 group-hover:scale-110">ðŸŽ¨</span>
            </div>
            <div class="p-6">
              <h3 class="text-xl font-semibold mb-2 text-gray-100">Creative Content & Design</h3>
              <p class="text-gray-400">Unleash creativity with AI tools for design, writing, and content generation.</p>
            </div>
          </a>
        </div>
      </div>
    </section>

    <!-- Footer will be included via JavaScript -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="js/navigation.js"></script>
    <script src="js/theme.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        let selectedType = "";
        let selectedScale = "";
        let selectedCategory = "";
        const searchInput = document.getElementById("searchInput");
        const typeFilter = document.getElementById("typeFilter");
        const scaleFilter = document.getElementById("scaleFilter");
        const categoryFilter = document.getElementById("categoryFilter");
        const sortByFilter = document.getElementById("sortFilter");
        const searchButton = document.getElementById("searchButton");
        const clearFiltersButton = document.getElementById("clearFiltersButton");

        // Check for category query parameter and set filter
        const urlParams = new URLSearchParams(window.location.search);
        const categoryFromUrl = urlParams.get('category');
        if (categoryFromUrl) {
          // Ensure the category from URL is a valid option before setting
          // This check can be more robust if options are dynamically populated before this script runs
          // For now, we assume categoryFilter might not have its options yet, 
          // but populateFilters will run soon. The value will be picked up by filterAndRenderAgents.
          const validCategories = ["data-analysis-research", "productivity-organization", "automation-utilities", "creative-content-design"];
          if (validCategories.includes(categoryFromUrl)) {
            categoryFilter.value = categoryFromUrl;
          } else {
            console.warn(`Category '${categoryFromUrl}' from URL is not a valid filter option.`);
          }
        }

        // Initialize visit counts from localStorage
        function getVisitCount(agentId) {
          const visits = JSON.parse(localStorage.getItem("agentVisits") || "{}");
          return visits[agentId] || 0;
        }

        // Update visit count for an agent
        function incrementVisitCount(agentId) {
          const visits = JSON.parse(localStorage.getItem("agentVisits") || "{}");
          visits[agentId] = (visits[agentId] || 0) + 1;
          localStorage.setItem("agentVisits", JSON.stringify(visits));
          return visits[agentId];
        }

        // Format visit count for display
        function formatVisitCount(count) {
          if (count >= 1000000) {
            return (count / 1000000).toFixed(1) + "M";
          } else if (count >= 1000) {
            return (count / 1000).toFixed(1) + "K";
          }
          return count.toString();
        }

        // Create agent card with visit tracking
        function createAgentCard(agent) {
          const visitCount = getVisitCount(agent.id);
          const card = document.createElement("div");
          card.className =
            "bg-gray-800/50 rounded-xl overflow-hidden border border-gray-700/50 backdrop-blur-sm transition-all duration-300 hover:transform hover:scale-[1.02] hover:shadow-xl";

          // Add click handler for visit tracking
          card.addEventListener("click", () => {
            const newCount = incrementVisitCount(agent.id);
            const countDisplay = card.querySelector(".visit-count");
            if (countDisplay) {
              countDisplay.textContent = formatVisitCount(newCount);
            }
          });

          card.innerHTML = `
                    <a href="pages/agent-detail.html?name=${encodeURIComponent(agent.name)}" class="block">
                        <div class="h-48 bg-gradient-to-br from-gray-800 to-gray-700 flex items-center justify-center transition-all duration-300 group-hover:from-gray-700 group-hover:to-gray-600">
                            <span class="text-6xl">${agent.icon || agent.emoji || 'ðŸ¤–'}</span>
                        </div>
                        <div class="p-6">
                            <div class="flex justify-between items-start mb-2">
                                <h3 class="text-xl font-semibold text-gray-100">${agent.name}</h3>
                                <div class="flex items-center gap-1 text-amber-400">
                                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                                    </svg>
                                    <span class="visit-count text-sm font-medium">${formatVisitCount(visitCount)}</span>
                                </div>
                            </div>
                            <p class="text-gray-400 text-sm mb-3">${agent.description}</p>
                            <div class="flex flex-wrap gap-2 mb-3">
                                ${agent.tags && agent.tags.length > 0
                                  ? agent.tags.map(tag => `<span class="px-2 py-1 text-xs font-medium bg-gray-700/50 text-gray-300 rounded-md">${tag}</span>`).join("")
                                  : '<span class="text-xs text-gray-500">No tags</span>'}
                            </div>
                            <div class="flex flex-wrap gap-2 text-xs">
                                <span class="px-2 py-1 bg-sky-700/50 text-sky-300 rounded-md">${agent.agentType || 'N/A'}</span>
                                <span class="px-2 py-1 bg-teal-700/50 text-teal-300 rounded-md">${agent.agentScale || 'N/A'}</span>
                                <span class="px-2 py-1 bg-indigo-700/50 text-indigo-300 rounded-md">${agent.category || 'N/A'}</span>
                            </div>
                        </div>
                    </a>
                `;
                // Fallback for icon: agent.icon then agent.emoji then default robot emoji
                // Added agentType, agentScale, and category to the card display with distinct styling.
          return card;
        }

        function renderAgents(agentsToRender) {
          if (!agentsContainer) {
            console.error("Agents container (agentsGrid) not found!");
            return;
          }
          agentsContainer.innerHTML = ''; // Clear existing cards
          if (agentsToRender.length === 0) {
            agentsContainer.innerHTML = '<p class="col-span-full text-center text-gray-400">No agents found matching your criteria.</p>';
          } else {
            agentsToRender.forEach(agent => {
              const card = createAgentCard(agent);
              agentsContainer.appendChild(card);
            });
          }
        }

        let allAgents = []; // To store agents fetched from JSON
        const agentsContainer = document.getElementById("agentsGrid");

        function populateFilters(agents) {
          const categories = new Set();
          const agentTypes = new Set();
          const agentScales = new Set();

          agents.forEach(agent => {
            if (agent.category) categories.add(agent.category);
            if (agent.agentType) agentTypes.add(agent.agentType); // Use new field name
            if (agent.agentScale) agentScales.add(agent.agentScale); // Use new field name
          });

          const populate = (selectElement, optionsSet, defaultValue) => {
            selectElement.innerHTML = `<option value="">All ${defaultValue}</option>`;
            optionsSet.forEach(option => {
              const opt = document.createElement('option');
              opt.value = option;
              opt.textContent = option;
              selectElement.appendChild(opt);
            });
          };

          populate(categoryFilter, categories, 'Categories');
          populate(typeFilter, agentTypes, 'Types');
          populate(scaleFilter, agentScales, 'Scales');
        }

        async function fetchDataAndInitialize() {
          try {
            const response = await fetch('public/data/agents-data.json');
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            allAgents = await response.json();
            populateFilters(allAgents);
            filterAndRenderAgents(); // Apply initial filters (including from URL) and render
            updateFiltersVisibility(); // Update filter visibility based on loaded data
          } catch (error) {
            console.error("Could not fetch or parse agents data:", error);
            agentsContainer.innerHTML = '<p class="text-center text-red-400">Error loading agents. Please try again later.</p>';
          }
        }

        function filterAndRenderAgents() {
          selectedType = typeFilter.value;
          selectedScale = scaleFilter.value;
          selectedCategory = categoryFilter.value;
          const searchTerm = searchInput.value.toLowerCase(); // Ensure searchTerm is defined here
          const sortBy = sortByFilter.value; // Ensure sortBy is defined here

          let filtered = allAgents.filter((agent) => {
            const matchesType = selectedType ? agent.agentType === selectedType : true;
            const matchesScale = selectedScale ? agent.agentScale === selectedScale : true;
            const matchesCategory = selectedCategory ? agent.category === selectedCategory : true;
            const matchesSearch = searchTerm
              ? agent.name.toLowerCase().includes(searchTerm) ||
                (agent.description && agent.description.toLowerCase().includes(searchTerm)) ||
                (agent.tags && agent.tags.some(tag => tag.toLowerCase().includes(searchTerm))) ||
                (agent.category && agent.category.toLowerCase().includes(searchTerm)) ||
                (agent.agentType && agent.agentType.toLowerCase().includes(searchTerm)) ||
                (agent.agentScale && agent.agentScale.toLowerCase().includes(searchTerm)) ||
                (agent.subcategory && agent.subcategory.toLowerCase().includes(searchTerm))
              : true;
            return matchesType && matchesScale && matchesCategory && matchesSearch;
          });

          // Sort the filtered agents
          if (sortBy === "name") {
            filtered.sort((a, b) => a.name.localeCompare(b.name));
          } else if (sortBy === "rating") {
            filtered.sort((a, b) => (b.rating || 0) - (a.rating || 0));
          } else if (sortBy === "visits") {
            filtered.sort((a,b) => (getVisitCount(b.id) || 0) - (getVisitCount(a.id) || 0));
          } else if (sortBy === "recent") {
            filtered.sort((a,b) => (b.id || 0) - (a.id || 0)); 
          } else if (sortBy === "popular") {
            filtered.sort((a,b) => (getVisitCount(b.id) || 0) - (getVisitCount(a.id) || 0));
          }

          renderAgents(filtered);
          updateFiltersVisibility();
        }

        // Search button click handler
        searchButton.addEventListener("click", function (e) {
          e.preventDefault();
          filterAndRenderAgents();
        });

        // Enter key handler for search input
        searchInput.addEventListener("keypress", function (e) {
          if (e.key === "Enter") {
            e.preventDefault();
            filterAndRenderAgents(); // Call the main function
          }
        });

        // Add change listeners to filters to call filterAndRenderAgents
        [typeFilter, scaleFilter, categoryFilter, sortByFilter].forEach((filter) => {
          filter.addEventListener("change", filterAndRenderAgents);
        });

        // Add change listeners to all filters
        [typeFilter, scaleFilter, categoryFilter, sortByFilter].forEach((filter) => {
          filter.addEventListener("change", function () {
            updateFiltersVisibility();
          });
        });

        searchInput.addEventListener("input", function () {
          updateFiltersVisibility();
        });

        function updateFiltersVisibility() {
          const hasActiveFilters =
            searchInput.value || typeFilter.value || scaleFilter.value || categoryFilter.value || sortByFilter.value;

          if (hasActiveFilters) {
            clearFiltersButton.classList.remove("hidden");
          } else {
            clearFiltersButton.classList.add("hidden");
          }

          // Add visual feedback for active dropdowns
          [typeFilter, scaleFilter, categoryFilter, sortByFilter].forEach((filter) => {
            if (filter.value) {
              filter.classList.add("border-amber-500");
            } else {
              filter.classList.remove("border-amber-500");
            }
          });
        }

        // Initial load: fetch data, populate filters, and render all agents
        fetchDataAndInitialize();
      });
    </script>
  </body>
</html>
